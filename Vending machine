# Store the product details in a list of dictionaries
products = [
    {'Item Code':'AA', 'Item Name':'Water', 'Item price':1, 'item stock':3},
    {'Item Code':'AB', 'Item Name':'Pepsi', 'Item price':3.5, 'item stock':6},
    {'Item Code':'AC', 'Item Name':'Redbull', 'Item price':6.5, 'item stock':1},
    {'Item Code':'AD', 'Item Name':'Skittles', 'Item price':3, 'item stock':2},
    {'Item Code':'AE', 'Item Name':'Croissant', 'Item price':2.5, 'item stock':6},
    {'Item Code':'AF', 'Item Name':'Kit-Kat', 'Item price':1.5, 'item stock':3},
    {'Item Code':'AG', 'Item Name':'Cheetos', 'Item price':3.5, 'item stock':6},
    {'Item Code':'AH', 'Item Name':'Milkyway', 'Item price':3, 'item stock':0},
    {'Item Code':'AI', 'Item Name':'Mars', 'Item price':3, 'item stock':4},
    {'Item Code':'AJ', 'Item Name':'Galaxy', 'Item price':3, 'item stock':9},
    {'Item Code':'AK', 'Item Name':'Fanta', 'Item price':2.5, 'item stock':8},
    {'Item Code':'AL', 'Item Name':'snickers', 'Item price':3.5, 'item stock':2}
]

# Print a welcome message and the product details
print('----------WELCOME TO THE VENDING MACHINE-----------')
for item in products:   
    print(f"{item['Item Code']}       \t  \t{item['Item Name']}      \t  \t {item['Item price']}")

# Get the amount of money from the user
try:
    money_am = float(input("Enter the amount of money: "))
except ValueError:
    print("Invalid amount of money")
    exit()

# Loop until the user wants to stop
while True:
    # Get the product code from the user
    pd_code = input("Enter the product code (or 'stop' to exit): ")
    if pd_code.lower() == 'stop':
        break

    if pd_code == "":
        print("Please enter a valid product code")
        continue

    # Find the product with the given code
    product = None
    for item in products:
        if item['Item Code'] == pd_code:
            product = item
            break
   
    if product is None:
        print("Invalid product code")
        print("Available products:")
        for item in products:
            print(f"{item['Item Code']}       \t  \t{item['Item Name']}      \t  \t {item['Item price']}")
        continue

    if product["item stock"] != 0:
        if money_am >= product["Item price"]:
            # If the amount of money is sufficient, dispense the product
            money_am -= product["Item price"]
            product["item stock"] -= 1
            print(f"\nDispensing a {product['Item Name']}")
            print(f"Your change is {money_am}")
            print(f"Stock left: {product['item stock']}")
        else:
            # If the amount of money is not sufficient, show an error message and the available change
            print("Insufficient money")
            print(f"Available change: {money_am}")
    else:
        print("\nThis product is out of stock")

# Find the most popular product
most_popular_product = products[8]
for item in products:
    if item['item stock'] > most_popular_product['item stock']:
        most_popular_product = item

# Display the most popular product
print(f"\nThe most popular product is {most_popular_product['Item Name']} with {most_popular_product['item stock']} units sold.")

# Display a message thanking the user for using the vending machine
print("\nThank you for using the vending machine!")

